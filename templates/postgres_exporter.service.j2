{{ ansible_managed | comment }}

[Unit]
Description=Prometheus Postgres Exporter
After=network.target

[Service]
Type=simple
Restart=always
User={{ postgres_exporter_user }}
Group={{ postgres_exporter_group }}
Environment="DATA_SOURCE_NAME={{ postgres_exporter_data_source_name }}"
ExecStart={{ postgres_exporter_install_path }}/postgres_exporter \
    --web.listen-address=0.0.0.0:9187
{% if postgres_exporter_extend_query_path | length > 0 %}
    --extend.query-path {{ postgres_exporter_extend_query_path }} \
{% endif %}
    --log.level={{ postgres_exporter_log_level }}

[Install]
WantedBy=multi-user.target
